// Protection par sessionStorage
if (sessionStorage.getItem("isAdmin") !== "true") {
  window.location.href = "login.html";
}

async function fetchBookings() {
  try {
    const response = await fetch('/api/bookings');
    const bookings = await response.json();

    const tableBody = document.querySelector('#bookingsTable tbody');
    tableBody.innerHTML = '';

    bookings.forEach((booking) => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${booking.id}</td>
        <td>${booking.customer_name || 'N/A'}</td>
        <td>${booking.vehicle_name || booking.vehicle_id}</td>
        <td>${new Date(booking.start_date).toLocaleDateString()}</td>
        <td>${new Date(booking.end_date).toLocaleDateString()}</td>
      `;
      tableBody.appendChild(row);
    });
  } catch (err) {
    console.error('Erreur lors du chargement des r√©servations', err);
  }
}

function logout() {
  sessionStorage.removeItem("isAdmin");
  window.location.href = "login.html";
}

fetchBookings();
